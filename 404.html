<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <title>Redirecting…</title>
    <style>
      :root {
        color-scheme: light;
        --primary: #0d4ed8;
        --muted: #30405a;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }
      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: radial-gradient(circle at 18% 20%, #e7f1ff, #d8e8ff 30%, #c7dbff 60%),
          linear-gradient(130deg, #f5f9ff 0%, #eaf2ff 50%, #e0ecff 100%);
        color: #111;
        padding: 1.5rem;
        text-align: center;
      }
      main {
        max-width: 460px;
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 18px;
        box-shadow: 0 18px 32px rgba(15, 23, 42, 0.16);
        border: 1px solid rgba(13, 78, 216, 0.12);
        backdrop-filter: blur(6px);
      }
      .brand-pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 999px;
        background: rgba(13, 78, 216, 0.08);
        border: 1px solid rgba(13, 78, 216, 0.18);
        color: var(--muted);
        font-weight: 600;
        letter-spacing: -0.01em;
        margin-bottom: 10px;
      }
      .brand-pill .plane {
        width: 18px;
        height: 18px;
        display: grid;
        place-items: center;
        background: radial-gradient(circle at 30% 30%, #fff, #d6e8ff);
        border-radius: 50%;
        box-shadow: 0 8px 20px rgba(13, 78, 216, 0.18);
        color: var(--primary);
      }
      h1 {
        font-size: 1.4rem;
        margin-bottom: 0.35rem;
        color: #0b1324;
      }
      p {
        margin-top: 0.35rem;
        line-height: 1.5;
        color: var(--muted);
      }
      a {
        color: var(--primary);
        font-weight: 600;
      }
      code {
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        background: rgba(13, 78, 216, 0.08);
        padding: 0.15rem 0.35rem;
        border-radius: 0.35rem;
        color: #0b1324;
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const path = window.location.pathname.replace(/^\/+|\/+$/g, "");
        const segments = path.split("/");
        if (segments.length >= 3 && segments[0] === "link" && segments[1] === "trip") {
          const tripId = segments.slice(2).join("/");
          if (tripId) {
            const urlTripId = encodeURIComponent(tripId);
            const deepLink = `trippie://trip/${urlTripId}`;
            const fallback = "https://apps.apple.com/app/6754893020";
            document.getElementById("status").textContent = "Opening your trip in Trippie…";
            document.getElementById("trip-id").textContent = tripId;
            document.getElementById("manual-link").href = deepLink;
            document.getElementById("manual-link").textContent = deepLink;
            setTimeout(function () {
              window.location.href = fallback;
            }, 2000);
            window.location.replace(deepLink);
            return;
          }
        }

        document.getElementById("status").textContent = "Page not found";
        document.getElementById("manual-link").style.display = "none";
        document.getElementById("trip-info").style.display = "none";
      });
    </script>
  </head>
  <body>
    <main>
      <span class="brand-pill"><span class="plane">✈︎</span> Trippie</span>
      <h1 id="status">Looking for your trip…</h1>
      <p id="trip-info">
        Trip ID: <code id="trip-id">–</code>
      </p>
      <p>
        If you are not redirected automatically, try the universal link below or
        open the App Store manually.
      </p>
      <p>
        <a id="manual-link" href="#">Open in Trippie</a>
      </p>
    </main>
  </body>
</html>
